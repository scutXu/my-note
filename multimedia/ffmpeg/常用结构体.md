###AVFormatContext###

对应一个视频文件

```
AVIOContext *		pb					实际进行IO操作的对象
AVInputFormat *	iformat 				实际进行解封装的对象
AVOuputFormat *	oformat					实际用于封装的对象
unsigned int	nb_streams
AVStream **		streams
```
```
int	avformat_open_input(AVFormatContext ** ps,
						const char * url,
						AVInputFormat * fmt,
						AVDictionary ** options)
```
```
int avformat_find_stream_info(AVFormatContext * ic,
                              AVDictionary ** options)
```
###AVInputFormat###

解封装器

```
const char * name
const char * long_name
int flags
const char * mime_type
```
```
flags

AVFMT_TS_DISCONT                        允许时间戳不连续
...
```
###AVStream###

多媒体流（视频/音频/字幕）

```
AVRational			time_base			pts和dts的度量单元，单位为秒
enum AVMediaType	codec_type			多媒体类型（视频，音频...）
enum AVCodecID 		codec_id			编/解码器类型索引
int					bit_rate            码率
int					sampler_rate		音频采样数/秒
int					channels			音频声道数
int					width				视频帧宽度
int					height				视频帧长度
enum AVPixelFormat	pix_fmt				视频像素格式
int					disposition
AVPacket            attached_pic        专辑封面（存放在视频流中）
```
```
disposition

AV_DISPOSITION_ATTACHED_PIC             携带了专辑封面
```
###AVPacket###

未解码的一帧视频或几帧音频

```
AVBufferRef * buf						nal数据（引用计数）
int64_t pts
int64_t dts
uint8_t * data							nal数据（非引用计数）
int size
```
###AVCodec

编解码器

```
const char * name
const char * long_name
enum AVMeidaType type
enum AVCodecID id
int capabilities
enum AVPixelFormat * pix_fmts           该编/解码所支持的像素格式（数组）
```
```
capacity

AV_CODEC_PROP_INTRA_ONLY       只做帧内压缩
AV_CODEC_PROP_LOSSY            支持无损压缩
...
```
```
AVCodec *avcodec_find_decoder_by_name(const char *name)
AVCodec *avcodec_find_decoder(enum AVCodecID id)
```
###AVCodecContext###

AVStream和AVCodec的关联类

```
AVMediaType codec_type
const struct AVCodec * codec

int					width
int					height
enum AVPixelFormat	pix_fmt
uint64_t            channel_layout;
int                 sample_rate;
int                 channels;
enum AVSampleFormat sample_fmt;
```
```
enum AVSampleFormat {
    AV_SAMPLE_FMT_NONE = -1,
    AV_SAMPLE_FMT_U8,          ///< unsigned 8 bits
    AV_SAMPLE_FMT_S16,         ///< signed 16 bits
    AV_SAMPLE_FMT_S32,         ///< signed 32 bits
    AV_SAMPLE_FMT_FLT,         ///< float
    AV_SAMPLE_FMT_DBL,         ///< double

    AV_SAMPLE_FMT_U8P,         ///< unsigned 8 bits, planar
    AV_SAMPLE_FMT_S16P,        ///< signed 16 bits, planar
    AV_SAMPLE_FMT_S32P,        ///< signed 32 bits, planar
    AV_SAMPLE_FMT_FLTP,        ///< float, planar
    AV_SAMPLE_FMT_DBLP,        ///< double, planar
    AV_SAMPLE_FMT_S64,         ///< signed 64 bits
    AV_SAMPLE_FMT_S64P,        ///< signed 64 bits, planar

    AV_SAMPLE_FMT_NB           ///< Number of sample formats. DO NOT USE if linking dynamically
};
```
```
enum AVPixelFormat {
AV_PIX_FMT_NONE = -1,
    AV_PIX_FMT_YUV420P,   ///< planar YUV 4:2:0, 12bpp, (1 Cr & Cb sample per 2x2 Y samples)
    AV_PIX_FMT_YUYV422,   ///< packed YUV 4:2:2, 16bpp, Y0 Cb Y1 Cr
    AV_PIX_FMT_RGB24,     ///< packed RGB 8:8:8, 24bpp, RGBRGB...
    AV_PIX_FMT_BGR24,     ///< packed RGB 8:8:8, 24bpp, BGRBGR...
    ...
}
```
```
AVCodecContext *avcodec_alloc_context3(const AVCodec *codec)
```
```
int avcodec_open2(AVCodecContext *avctx, 
                  const AVCodec *codec, 
                  AVDictionary **options)
```
```
int avcodec_parameters_to_context(AVCodecContext *codec,
                                  const AVCodecParameters *par)
```
###AVFrame###

解码后的一帧视频或一帧音频

```
uint8_t * data [AV_NUM_DATA_POINTERS]	图像/音频数据（各个通道/声道可能分别存。yuv通道分
										别存放，rgb通道混合存放在data[0]中）
int linesize [AV_NUM_DATA_POINTERS]		像素行占的字节数/整段音频一个声道占的字节数
int width
int height
int nb_samples							音频在此帧中的采样数
int repeat_pict							视频帧连续播放的帧数
```


